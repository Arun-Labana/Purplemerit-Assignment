apiVersion: v1
kind: Service
metadata:
  name: api-service
  namespace: collaborative-workspace
  labels:
    app: collaborative-workspace
    component: api
spec:
  type: ClusterIP
  ports:
  - port: 80
    targetPort: 3000
    protocol: TCP
    name: http
  selector:
    app: collaborative-workspace
    component: api
  sessionAffinity: ClientIP
  sessionAffinityConfig:
    clientIP:
      timeoutSeconds: 10800

---
# Optional: LoadBalancer service for direct external access
# Uncomment if you need direct external access without Ingress
# apiVersion: v1
# kind: Service
# metadata:
#   name: api-service-lb
#   namespace: collaborative-workspace
#   labels:
#     app: collaborative-workspace
#     component: api
# spec:
#   type: LoadBalancer
#   ports:
#   - port: 80
#     targetPort: 3000
#     protocol: TCP
#     name: http
#   selector:
#     app: collaborative-workspace
#     component: api

